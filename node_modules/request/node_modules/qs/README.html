<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <title>Vitor Leal</title>
    <meta name="description" content="Consultor de Sistemas e Negócios no Centro de Inovação da Telefonica Vivo trabalhando com Internet of Things e Smart Cities.">

    <meta name="theme-color"           content="#48CBAB">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"              content="width=device-width, initial-scale=1">

    <meta property="og:url"            content="http://vitorleal.com">
    <meta property="og:image"          content="http://vitorleal.com/assets/img/vitorleal.jpg">
    <meta property="og:title"          content="Vitor Leal">
    <meta property="og:description"    content="Consultor de Sistemas e Negócios no Centro de Inovação da Telefonica Vivo trabalhando com Internet of Things e Smart Cities.">
    <meta property="og:type"           content="blog">

    <meta name="twitter:card"          content="summary">
    <meta name="twitter:creator"       content="@vitorleal">
    <meta name="twitter:site"          content="@vitorleal">
    <meta name="twitter:domain"        content="http://vitorleal.com">
    <meta name="twitter:title"         content="Vitor Leal">
    <meta name="twitter:description"   content="Consultor de Sistemas e Negócios no Centro de Inovação da Telefonica Vivo trabalhando com Internet of Things e Smart Cities.">
    <meta property="og:image"          content="http://vitorleal.com/assets/img/vitorleal.jpg">

    <link href="./assets/img/favicon.png"    rel="icon">
    <link href="./assets/img/favicon.big.png" rel="icon" sizes="192x192">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="./assets/css/prism.css">
    <link rel="stylesheet" href="./assets/css/material.min.css">
    <link rel="stylesheet" href="./assets/css/main.css">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-5427757-17', 'auto');
  ga('send', 'pageview');
</script>

  </head>

  <body>
    <section class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <div class="android-header mdl-layout__header mdl-layout__header--waterfall">
  <div class="mdl-layout__header-row">
    <h1 class="android-font android-title mdl-layout-title mdl-typography--text-uppercase android-link">Vitor Leal</h1>

    <div class="android-header-spacer mdl-layout-spacer"></div>

    <div class="android-navigation-container">
      <nav class="android-navigation mdl-navigation">
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="./">
          Home
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          active"
          href="./blog">
          Blog
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="./projetos">
          Projetos
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="./portfolio">
          Portfolio
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="./talks">
          Talks
        </a>
        
      </nav>
    </div>
  </div>
</div>

<div class="android-drawer mdl-layout__drawer">
  <nav class="mdl-navigation">
    
    <a class="mdl-navigation__link" href="./">
      Home
    </a>
    
    <a class="mdl-navigation__link" href="./blog">
      Blog
    </a>
    
    <a class="mdl-navigation__link" href="./projetos">
      Projetos
    </a>
    
    <a class="mdl-navigation__link" href="./portfolio">
      Portfolio
    </a>
    
    <a class="mdl-navigation__link" href="./talks">
      Talks
    </a>
    
    
    <a class="mdl-navigation__link" href="https://github.com/vitorleal" target="_blank">
      GitHub
    </a>
    
    <a class="mdl-navigation__link" href="http://www.linkedin.com/in/vitorleal" target="_blank">
      LinkedIn
    </a>
    
    <a class="mdl-navigation__link" href="https://twitter.com/@vitorleal" target="_blank">
      Twitter
    </a>
    
  </nav>
</div>


      <div class="android-content mdl-layout__content">
        
            <h1>qs</h1><p>A querystring parsing and stringifying library with some added security.</p>
<p><a href="http://travis-ci.org/hapijs/qs"><img src="https://secure.travis-ci.org/hapijs/qs.svg" alt="Build Status"></a></p>
<p>Lead Maintainer: <a href="https://github.com/nlf">Nathan LaFreniere</a></p>
<p>The <strong>qs</strong> module was originally created and maintained by <a href="https://github.com/visionmedia/node-querystring">TJ Holowaychuk</a>.</p>
<h2>Usage</h2><pre><code class="language-javascript">var Qs = require(&#39;qs&#39;);

var obj = Qs.parse(&#39;a=c&#39;);    // { a: &#39;c&#39; }
var str = Qs.stringify(obj);  // &#39;a=c&#39;
</code></pre>
<h3>Parsing Objects</h3><pre><code class="language-javascript">Qs.parse(string, [options]);
</code></pre>
<p><strong>qs</strong> allows you to create nested objects within your query strings, by surrounding the name of sub-keys with square brackets <code>[]</code>.
For example, the string <code>&#39;foo[bar]=baz&#39;</code> converts to:</p>
<pre><code class="language-javascript">{
  foo: {
    bar: &#39;baz&#39;
  }
}
</code></pre>
<p>When using the <code>plainObjects</code> option the parsed value is returned as a plain object, created via <code>Object.create(null)</code> and as such you should be aware that prototype methods will not exist on it and a user may set those names to whatever value they like:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a.hasOwnProperty=b&#39;, { plainObjects: true });
// { a: { hasOwnProperty: &#39;b&#39; } }
</code></pre>
<p>By default parameters that would overwrite properties on the object prototype are ignored, if you wish to keep the data from those fields either use <code>plainObjects</code> as mentioned above, or set <code>allowPrototypes</code> to <code>true</code> which will allow user input to overwrite those properties. <em>WARNING</em> It is generally a bad idea to enable this option as it can cause problems when attempting to use the properties that have been overwritten. Always be careful with this option.</p>
<pre><code class="language-javascript">Qs.parse(&#39;a.hasOwnProperty=b&#39;, { allowPrototypes: true });
// { a: { hasOwnProperty: &#39;b&#39; } }
</code></pre>
<p>URI encoded strings work too:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a%5Bb%5D=c&#39;);
// { a: { b: &#39;c&#39; } }
</code></pre>
<p>You can also nest your objects, like <code>&#39;foo[bar][baz]=foobarbaz&#39;</code>:</p>
<pre><code class="language-javascript">{
  foo: {
    bar: {
      baz: &#39;foobarbaz&#39;
    }
  }
}
</code></pre>
<p>By default, when nesting objects <strong>qs</strong> will only parse up to 5 children deep. This means if you attempt to parse a string like
<code>&#39;a[b][c][d][e][f][g][h][i]=j&#39;</code> your resulting object will be:</p>
<pre><code class="language-javascript">{
  a: {
    b: {
      c: {
        d: {
          e: {
            f: {
              &#39;[g][h][i]&#39;: &#39;j&#39;
            }
          }
        }
      }
    }
  }
}
</code></pre>
<p>This depth can be overridden by passing a <code>depth</code> option to <code>Qs.parse(string, [options])</code>:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[b][c][d][e][f][g][h][i]=j&#39;, { depth: 1 });
// { a: { b: { &#39;[c][d][e][f][g][h][i]&#39;: &#39;j&#39; } } }
</code></pre>
<p>The depth limit helps mitigate abuse when <strong>qs</strong> is used to parse user input, and it is recommended to keep it a reasonably small number.</p>
<p>For similar reasons, by default <strong>qs</strong> will only parse up to 1000 parameters. This can be overridden by passing a <code>parameterLimit</code> option:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a=b&amp;c=d&#39;, { parameterLimit: 1 });
// { a: &#39;b&#39; }
</code></pre>
<p>An optional delimiter can also be passed:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a=b;c=d&#39;, { delimiter: &#39;;&#39; });
// { a: &#39;b&#39;, c: &#39;d&#39; }
</code></pre>
<p>Delimiters can be a regular expression too:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a=b;c=d,e=f&#39;, { delimiter: /[;,]/ });
// { a: &#39;b&#39;, c: &#39;d&#39;, e: &#39;f&#39; }
</code></pre>
<p>Option <code>allowDots</code> can be used to enable dot notation:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a.b=c&#39;, { allowDots: true });
// { a: { b: &#39;c&#39; } }
</code></pre>
<h3>Parsing Arrays</h3><p><strong>qs</strong> can also parse arrays using a similar <code>[]</code> notation:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[]=b&amp;a[]=c&#39;);
// { a: [&#39;b&#39;, &#39;c&#39;] }
</code></pre>
<p>You may specify an index as well:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[1]=c&amp;a[0]=b&#39;);
// { a: [&#39;b&#39;, &#39;c&#39;] }
</code></pre>
<p>Note that the only difference between an index in an array and a key in an object is that the value between the brackets must be a number
to create an array. When creating arrays with specific indices, <strong>qs</strong> will compact a sparse array to only the existing values preserving
their order:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[1]=b&amp;a[15]=c&#39;);
// { a: [&#39;b&#39;, &#39;c&#39;] }
</code></pre>
<p>Note that an empty string is also a value, and will be preserved:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[]=&amp;a[]=b&#39;);
// { a: [&#39;&#39;, &#39;b&#39;] }
Qs.parse(&#39;a[0]=b&amp;a[1]=&amp;a[2]=c&#39;);
// { a: [&#39;b&#39;, &#39;&#39;, &#39;c&#39;] }
</code></pre>
<p><strong>qs</strong> will also limit specifying indices in an array to a maximum index of <code>20</code>. Any array members with an index of greater than <code>20</code> will
instead be converted to an object with the index as the key:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[100]=b&#39;);
// { a: { &#39;100&#39;: &#39;b&#39; } }
</code></pre>
<p>This limit can be overridden by passing an <code>arrayLimit</code> option:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[1]=b&#39;, { arrayLimit: 0 });
// { a: { &#39;1&#39;: &#39;b&#39; } }
</code></pre>
<p>To disable array parsing entirely, set <code>parseArrays</code> to <code>false</code>.</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[]=b&#39;, { parseArrays: false });
// { a: { &#39;0&#39;: &#39;b&#39; } }
</code></pre>
<p>If you mix notations, <strong>qs</strong> will merge the two items into an object:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[0]=b&amp;a[b]=c&#39;);
// { a: { &#39;0&#39;: &#39;b&#39;, b: &#39;c&#39; } }
</code></pre>
<p>You can also create arrays of objects:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a[][b]=c&#39;);
// { a: [{ b: &#39;c&#39; }] }
</code></pre>
<h3>Stringifying</h3><pre><code class="language-javascript">Qs.stringify(object, [options]);
</code></pre>
<p>When stringifying, <strong>qs</strong> by default URI encodes output. Objects are stringified as you would expect:</p>
<pre><code class="language-javascript">Qs.stringify({ a: &#39;b&#39; });
// &#39;a=b&#39;
Qs.stringify({ a: { b: &#39;c&#39; } });
// &#39;a%5Bb%5D=c&#39;
</code></pre>
<p>This encoding can be disabled by setting the <code>encode</code> option to <code>false</code>:</p>
<pre><code class="language-javascript">Qs.stringify({ a: { b: &#39;c&#39; } }, { encode: false });
// &#39;a[b]=c&#39;
</code></pre>
<p>Examples beyond this point will be shown as though the output is not URI encoded for clarity. Please note that the return values in these cases <em>will</em> be URI encoded during real usage.</p>
<p>When arrays are stringified, by default they are given explicit indices:</p>
<pre><code class="language-javascript">Qs.stringify({ a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;] });
// &#39;a[0]=b&amp;a[1]=c&amp;a[2]=d&#39;
</code></pre>
<p>You may override this by setting the <code>indices</code> option to <code>false</code>:</p>
<pre><code class="language-javascript">Qs.stringify({ a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;] }, { indices: false });
// &#39;a=b&amp;a=c&amp;a=d&#39;
</code></pre>
<p>You may use the <code>arrayFormat</code> option to specify the format of the output array</p>
<pre><code class="language-javascript">Qs.stringify({ a: [&#39;b&#39;, &#39;c&#39;] }, { arrayFormat: &#39;indices&#39; })
// &#39;a[0]=b&amp;a[1]=c&#39;
Qs.stringify({ a: [&#39;b&#39;, &#39;c&#39;] }, { arrayFormat: &#39;brackets&#39; })
// &#39;a[]=b&amp;a[]=c&#39;
Qs.stringify({ a: [&#39;b&#39;, &#39;c&#39;] }, { arrayFormat: &#39;repeat&#39; })
// &#39;a=b&amp;a=c&#39;
</code></pre>
<p>Empty strings and null values will omit the value, but the equals sign (=) remains in place:</p>
<pre><code class="language-javascript">Qs.stringify({ a: &#39;&#39; });
// &#39;a=&#39;
</code></pre>
<p>Properties that are set to <code>undefined</code> will be omitted entirely:</p>
<pre><code class="language-javascript">Qs.stringify({ a: null, b: undefined });
// &#39;a=&#39;
</code></pre>
<p>The delimiter may be overridden with stringify as well:</p>
<pre><code class="language-javascript">Qs.stringify({ a: &#39;b&#39;, c: &#39;d&#39; }, { delimiter: &#39;;&#39; });
// &#39;a=b;c=d&#39;
</code></pre>
<p>Finally, you can use the <code>filter</code> option to restrict which keys will be included in the stringified output.
If you pass a function, it will be called for each key to obtain the replacement value. Otherwise, if you
pass an array, it will be used to select properties and array indices for stringification:</p>
<pre><code class="language-javascript">function filterFunc(prefix, value) {
  if (prefix == &#39;b&#39;) {
    // Return an `undefined` value to omit a property.
    return;
  }
  if (prefix == &#39;e[f]&#39;) {
    return value.getTime();
  }
  if (prefix == &#39;e[g][0]&#39;) {
    return value * 2;
  }
  return value;
}
Qs.stringify({ a: &#39;b&#39;, c: &#39;d&#39;, e: { f: new Date(123), g: [2] } }, { filter: filterFunc })
// &#39;a=b&amp;c=d&amp;e[f]=123&amp;e[g][0]=4&#39;
Qs.stringify({ a: &#39;b&#39;, c: &#39;d&#39;, e: &#39;f&#39; }, { filter: [&#39;a&#39;, &#39;e&#39;] })
// &#39;a=b&amp;e=f&#39;
Qs.stringify({ a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], e: &#39;f&#39; }, { filter: [&#39;a&#39;, 0, 2] })
// &#39;a[0]=b&amp;a[2]=d&#39;
</code></pre>
<h3>Handling of <code>null</code> values</h3><p>By default, <code>null</code> values are treated like empty strings:</p>
<pre><code class="language-javascript">Qs.stringify({ a: null, b: &#39;&#39; });
// &#39;a=&amp;b=&#39;
</code></pre>
<p>Parsing does not distinguish between parameters with and without equal signs. Both are converted to empty strings.</p>
<pre><code class="language-javascript">Qs.parse(&#39;a&amp;b=&#39;)
// { a: &#39;&#39;, b: &#39;&#39; }
</code></pre>
<p>To distinguish between <code>null</code> values and empty strings use the <code>strictNullHandling</code> flag. In the result string the <code>null</code>
values have no <code>=</code> sign:</p>
<pre><code class="language-javascript">Qs.stringify({ a: null, b: &#39;&#39; }, { strictNullHandling: true });
// &#39;a&amp;b=&#39;
</code></pre>
<p>To parse values without <code>=</code> back to <code>null</code> use the <code>strictNullHandling</code> flag:</p>
<pre><code class="language-javascript">Qs.parse(&#39;a&amp;b=&#39;, { strictNullHandling: true });
// { a: null, b: &#39;&#39; }
</code></pre>
<p>To completely skip rendering keys with <code>null</code> values, use the <code>skipNulls</code> flag:</p>
<pre><code class="language-javascript">qs.stringify({ a: &#39;b&#39;, c: null}, { skipNulls: true })
// &#39;a=b&#39;
</code></pre>
        

        <footer class="android-footer mdl-mega-footer">
  <div class="mdl-mega-footer--top-section">
    <div class="mdl-mega-footer--left-section">
    </div>

    <div class="mdl-mega-footer--right-section">
      <a class="mdl-typography--font-light" href="#top">
        Ir para o topo <i class="material-icons">expand_less</i>
      </a>
    </div>
  </div>

  <div class="mdl-mega-footer--middle-section">
    <p class="mdl-typography--font-light">
      Copyright &copy; 2015 - Vitor Leal - <a href="mailto:me@vitorleal.com">me@vitorleal.com</a>
    </p>
  </div>

  <div class="mdl-mega-footer--bottom-section">
    
    <a class="android-link mdl-typography--font-light"
      href="./">
      Home
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="./blog">
      Blog
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="./projetos">
      Projetos
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="./portfolio">
      Portfolio
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="./talks">
      Talks
    </a>
    
    
    <a class="android-link mdl-typography--font-light" href="https://github.com/vitorleal" target="_blank">
      GitHub
    </a>
    
    <a class="android-link mdl-typography--font-light" href="http://www.linkedin.com/in/vitorleal" target="_blank">
      LinkedIn
    </a>
    
    <a class="android-link mdl-typography--font-light" href="https://twitter.com/@vitorleal" target="_blank">
      Twitter
    </a>
    
  </div>
</footer>

      </div>
    </section>

    <script src="./assets/js/material.min.js" ></script>
    <script src="./assets/js/prism.js"></script>
  </body>
</html>
