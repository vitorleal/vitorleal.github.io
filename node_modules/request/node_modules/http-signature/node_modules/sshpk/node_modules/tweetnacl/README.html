<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <title>Vitor Leal</title>
    <meta name="description" content="Consultor de Sistemas e Negócios no Centro de Inovação da Telefonica Vivo trabalhando com Internet of Things e Smart Cities.">

    <meta name="theme-color"           content="#48CBAB">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"              content="width=device-width, initial-scale=1">

    <meta property="og:url"            content="https://vitorleal.com/">
    <meta property="og:image"          content="https://vitorleal.com//assets/img/vitorleal.jpg">
    <meta property="og:title"          content="Vitor Leal">
    <meta property="og:description"    content="Consultor de Sistemas e Negócios no Centro de Inovação da Telefonica Vivo trabalhando com Internet of Things e Smart Cities.">
    <meta property="og:type"           content="blog">

    <meta name="twitter:card"          content="summary">
    <meta name="twitter:creator"       content="@vitorleal">
    <meta name="twitter:site"          content="@vitorleal">
    <meta name="twitter:domain"        content="https://vitorleal.com/">
    <meta name="twitter:title"         content="Vitor Leal">
    <meta name="twitter:description"   content="Consultor de Sistemas e Negócios no Centro de Inovação da Telefonica Vivo trabalhando com Internet of Things e Smart Cities.">
    <meta property="og:image"          content="https://vitorleal.com//assets/img/vitorleal.jpg">

    <meta name="referrer"              content="always">

    <link href="./assets/img/favicon.png"    rel="icon">
    <link href="./assets/img/favicon.big.png" rel="icon" sizes="192x192">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="./assets/css/prism.css">
    <link rel="stylesheet" href="./assets/css/material.min.css">
    <link rel="stylesheet" href="./assets/css/main.css">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-5427757-17', 'auto');
  ga('send', 'pageview');
</script>

  </head>

  <body>
    <section class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <div class="android-header mdl-layout__header mdl-layout__header--waterfall">
  <div class="mdl-layout__header-row">
    <h1 class="android-font android-title mdl-layout-title mdl-typography--text-uppercase android-link">Vitor Leal</h1>

    <div class="android-header-spacer mdl-layout-spacer"></div>

    <div class="android-navigation-container">
      <nav class="android-navigation mdl-navigation">
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="https://vitorleal.com/">
          Home
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          active"
          href="https://vitorleal.com/blog">
          Blog
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="https://vitorleal.com/projetos">
          Projetos
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="https://vitorleal.com/portfolio">
          Portfolio
        </a>
        
        <a class="mdl-navigation__link mdl-typography--text-uppercase
          "
          href="https://vitorleal.com/talks">
          Talks
        </a>
        
      </nav>
    </div>
  </div>
</div>

<div class="android-drawer mdl-layout__drawer">
  <nav class="mdl-navigation">
    
    <a class="mdl-navigation__link" href="https://vitorleal.com/">
      Home
    </a>
    
    <a class="mdl-navigation__link" href="https://vitorleal.com/blog">
      Blog
    </a>
    
    <a class="mdl-navigation__link" href="https://vitorleal.com/projetos">
      Projetos
    </a>
    
    <a class="mdl-navigation__link" href="https://vitorleal.com/portfolio">
      Portfolio
    </a>
    
    <a class="mdl-navigation__link" href="https://vitorleal.com/talks">
      Talks
    </a>
    
    
    <a class="mdl-navigation__link" href="https://github.com/vitorleal" target="_blank">
      GitHub
    </a>
    
    <a class="mdl-navigation__link" href="http://www.linkedin.com/in/vitorleal" target="_blank">
      LinkedIn
    </a>
    
    <a class="mdl-navigation__link" href="https://twitter.com/@vitorleal" target="_blank">
      Twitter
    </a>
    
  </nav>
</div>


      <div class="android-content mdl-layout__content">
        
            <h1>TweetNaCl.js</h1><p>Port of <a href="http://tweetnacl.cr.yp.to">TweetNaCl</a> / <a href="http://nacl.cr.yp.to/">NaCl</a>
to JavaScript for modern browsers and Node.js. Public domain.</p>
<p><a href="https://travis-ci.org/dchest/tweetnacl-js"><img src="https://travis-ci.org/dchest/tweetnacl-js.svg?branch=master" alt="Build Status">
</a></p>
<p>Demo: <a href="https://tweetnacl.js.org">https://tweetnacl.js.org</a></p>
<p><strong>:warning: Beta version. The library is stable and API is frozen, however
it has not been independently reviewed. If you can help reviewing it, please
<a href="mailto:dmitry@codingrobots.com">contact me</a>.</strong></p>
<h1>Documentation</h1><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#public-key-authenticated-encryption-box">Public-key authenticated encryption (box)</a></li>
<li><a href="#secret-key-authenticated-encryption-secretbox">Secret-key authenticated encryption (secretbox)</a></li>
<li><a href="#scalar-multiplication">Scalar multiplication</a></li>
<li><a href="#signatures">Signatures</a></li>
<li><a href="#hashing">Hashing</a></li>
<li><a href="#random-bytes-generation">Random bytes generation</a></li>
<li><a href="#constant-time-comparison">Constant-time comparison</a></li>
</ul>
</li>
<li><a href="#system-requirements">System requirements</a></li>
<li><a href="#development-and-testing">Development and testing</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#who-uses-it">Who uses it</a></li>
</ul>
<h2>Overview</h2><p>The primary goal of this project is to produce a translation of TweetNaCl to
JavaScript which is as close as possible to the original C implementation, plus
a thin layer of idiomatic high-level API on top of it.</p>
<p>There are two versions, you can use either of them:</p>
<ul>
<li><p><code>nacl.js</code> is the port of TweetNaCl with minimum differences from the
original + high-level API.</p>
</li>
<li><p><code>nacl-fast.js</code> is like <code>nacl.js</code>, but with some functions replaced with
faster versions.</p>
</li>
</ul>
<h2>Installation</h2><p>You can install TweetNaCl.js via a package manager:</p>
<p><a href="http://bower.io">Bower</a>:</p>
<pre><code>$ bower install tweetnacl
</code></pre><p><a href="https://www.npmjs.org/">NPM</a>:</p>
<pre><code>$ npm install tweetnacl
</code></pre><p>or <a href="https://github.com/dchest/tweetnacl-js/releases">download source code</a>.</p>
<h2>Usage</h2><p>All API functions accept and return bytes as <code>Uint8Array</code>s.  If you need to
encode or decode strings, use functions from
<a href="https://github.com/dchest/tweetnacl-util-js">https://github.com/dchest/tweetnacl-util-js</a> or one of the more robust codec
packages.</p>
<p>In Node.js v4 and later <code>Buffer</code> objects are backed by <code>Uint8Array</code>s, so you
can freely pass them to TweetNaCl.js functions as arguments. The returned
objects are still <code>Uint8Array</code>s, so if you need <code>Buffer</code>s, you&#39;ll have to
convert them manually; make sure to convert using copying: <code>new Buffer(array)</code>,
instead of sharing: <code>new Buffer(array.buffer)</code>, because some functions return
subarrays of their buffers.</p>
<h3>Public-key authenticated encryption (box)</h3><p>Implements <em>curve25519-xsalsa20-poly1305</em>.</p>
<h4>nacl.box.keyPair()</h4><p>Generates a new random key pair for box and returns it as an object with
<code>publicKey</code> and <code>secretKey</code> members:</p>
<pre><code>{
   publicKey: ...,  // Uint8Array with 32-byte public key
   secretKey: ...   // Uint8Array with 32-byte secret key
}
</code></pre><h4>nacl.box.keyPair.fromSecretKey(secretKey)</h4><p>Returns a key pair for box with public key corresponding to the given secret
key.</p>
<h4>nacl.box(message, nonce, theirPublicKey, mySecretKey)</h4><p>Encrypt and authenticates message using peer&#39;s public key, our secret key, and
the given nonce, which must be unique for each distinct message for a key pair.</p>
<p>Returns an encrypted and authenticated message, which is
<code>nacl.box.overheadLength</code> longer than the original message.</p>
<h4>nacl.box.open(box, nonce, theirPublicKey, mySecretKey)</h4><p>Authenticates and decrypts the given box with peer&#39;s public key, our secret
key, and the given nonce.</p>
<p>Returns the original message, or <code>false</code> if authentication fails.</p>
<h4>nacl.box.before(theirPublicKey, mySecretKey)</h4><p>Returns a precomputed shared key which can be used in <code>nacl.box.after</code> and
<code>nacl.box.open.after</code>.</p>
<h4>nacl.box.after(message, nonce, sharedKey)</h4><p>Same as <code>nacl.box</code>, but uses a shared key precomputed with <code>nacl.box.before</code>.</p>
<h4>nacl.box.open.after(box, nonce, sharedKey)</h4><p>Same as <code>nacl.box.open</code>, but uses a shared key precomputed with <code>nacl.box.before</code>.</p>
<h4>nacl.box.publicKeyLength = 32</h4><p>Length of public key in bytes.</p>
<h4>nacl.box.secretKeyLength = 32</h4><p>Length of secret key in bytes.</p>
<h4>nacl.box.sharedKeyLength = 32</h4><p>Length of precomputed shared key in bytes.</p>
<h4>nacl.box.nonceLength = 24</h4><p>Length of nonce in bytes.</p>
<h4>nacl.box.overheadLength = 16</h4><p>Length of overhead added to box compared to original message.</p>
<h3>Secret-key authenticated encryption (secretbox)</h3><p>Implements <em>xsalsa20-poly1305</em>.</p>
<h4>nacl.secretbox(message, nonce, key)</h4><p>Encrypt and authenticates message using the key and the nonce. The nonce must
be unique for each distinct message for this key.</p>
<p>Returns an encrypted and authenticated message, which is
<code>nacl.secretbox.overheadLength</code> longer than the original message.</p>
<h4>nacl.secretbox.open(box, nonce, key)</h4><p>Authenticates and decrypts the given secret box using the key and the nonce.</p>
<p>Returns the original message, or <code>false</code> if authentication fails.</p>
<h4>nacl.secretbox.keyLength = 32</h4><p>Length of key in bytes.</p>
<h4>nacl.secretbox.nonceLength = 24</h4><p>Length of nonce in bytes.</p>
<h4>nacl.secretbox.overheadLength = 16</h4><p>Length of overhead added to secret box compared to original message.</p>
<h3>Scalar multiplication</h3><p>Implements <em>curve25519</em>.</p>
<h4>nacl.scalarMult(n, p)</h4><p>Multiplies an integer <code>n</code> by a group element <code>p</code> and returns the resulting
group element.</p>
<h4>nacl.scalarMult.base(n)</h4><p>Multiplies an integer <code>n</code> by a standard group element and returns the resulting
group element.</p>
<h4>nacl.scalarMult.scalarLength = 32</h4><p>Length of scalar in bytes.</p>
<h4>nacl.scalarMult.groupElementLength = 32</h4><p>Length of group element in bytes.</p>
<h3>Signatures</h3><p>Implements <a href="http://ed25519.cr.yp.to">ed25519</a>.</p>
<h4>nacl.sign.keyPair()</h4><p>Generates new random key pair for signing and returns it as an object with
<code>publicKey</code> and <code>secretKey</code> members:</p>
<pre><code>{
   publicKey: ...,  // Uint8Array with 32-byte public key
   secretKey: ...   // Uint8Array with 64-byte secret key
}
</code></pre><h4>nacl.sign.keyPair.fromSecretKey(secretKey)</h4><p>Returns a signing key pair with public key corresponding to the given
64-byte secret key. The secret key must have been generated by
<code>nacl.sign.keyPair</code> or <code>nacl.sign.keyPair.fromSeed</code>.</p>
<h4>nacl.sign.keyPair.fromSeed(seed)</h4><p>Returns a new signing key pair generated deterministically from a 32-byte seed.
The seed must contain enough entropy to be secure. This method is not
recommended for general use: instead, use <code>nacl.sign.keyPair</code> to generate a new
key pair from a random seed.</p>
<h4>nacl.sign(message, secretKey)</h4><p>Signs the message using the secret key and returns a signed message.</p>
<h4>nacl.sign.open(signedMessage, publicKey)</h4><p>Verifies the signed message and returns the message without signature.</p>
<p>Returns <code>null</code> if verification failed.</p>
<h4>nacl.sign.detached(message, secretKey)</h4><p>Signs the message using the secret key and returns a signature.</p>
<h4>nacl.sign.detached.verify(message, signature, publicKey)</h4><p>Verifies the signature for the message and returns <code>true</code> if verification
succeeded or <code>false</code> if it failed.</p>
<h4>nacl.sign.publicKeyLength = 32</h4><p>Length of signing public key in bytes.</p>
<h4>nacl.sign.secretKeyLength = 64</h4><p>Length of signing secret key in bytes.</p>
<h4>nacl.sign.seedLength = 32</h4><p>Length of seed for <code>nacl.sign.keyPair.fromSeed</code> in bytes.</p>
<h4>nacl.sign.signatureLength = 64</h4><p>Length of signature in bytes.</p>
<h3>Hashing</h3><p>Implements <em>SHA-512</em>.</p>
<h4>nacl.hash(message)</h4><p>Returns SHA-512 hash of the message.</p>
<h4>nacl.hash.hashLength = 64</h4><p>Length of hash in bytes.</p>
<h3>Random bytes generation</h3><h4>nacl.randomBytes(length)</h4><p>Returns a <code>Uint8Array</code> of the given length containing random bytes of
cryptographic quality.</p>
<p><strong>Implementation note</strong></p>
<p>TweetNaCl.js uses the following methods to generate random bytes,
depending on the platform it runs on:</p>
<ul>
<li><code>window.crypto.getRandomValues</code> (WebCrypto standard)</li>
<li><code>window.msCrypto.getRandomValues</code> (Internet Explorer 11)</li>
<li><code>crypto.randomBytes</code> (Node.js)</li>
</ul>
<p>If the platform doesn&#39;t provide a suitable PRNG, the following functions,
which require random numbers, will throw exception:</p>
<ul>
<li><code>nacl.randomBytes</code></li>
<li><code>nacl.box.keyPair</code></li>
<li><code>nacl.sign.keyPair</code></li>
</ul>
<p>Other functions are deterministic and will continue working.</p>
<p>If a platform you are targeting doesn&#39;t implement secure random number
generator, but you somehow have a cryptographically-strong source of entropy
(not <code>Math.random</code>!), and you know what you are doing, you can plug it into
TweetNaCl.js like this:</p>
<pre><code>nacl.setPRNG(function(x, n) {
  // ... copy n random bytes into x ...
});
</code></pre><p>Note that <code>nacl.setPRNG</code> <em>completely replaces</em> internal random byte generator
with the one provided.</p>
<h3>Constant-time comparison</h3><h4>nacl.verify(x, y)</h4><p>Compares <code>x</code> and <code>y</code> in constant time and returns <code>true</code> if their lengths are
non-zero and equal, and their contents are equal.</p>
<p>Returns <code>false</code> if either of the arguments has zero length, or arguments have
different lengths, or their contents differ.</p>
<h2>System requirements</h2><p>TweetNaCl.js supports modern browsers that have a cryptographically secure
pseudorandom number generator and typed arrays, including the latest versions
of:</p>
<ul>
<li>Chrome</li>
<li>Firefox</li>
<li>Safari (Mac, iOS)</li>
<li>Internet Explorer 11</li>
</ul>
<p>Other systems:</p>
<ul>
<li>Node.js</li>
</ul>
<h2>Development and testing</h2><p>Install NPM modules needed for development:</p>
<pre><code>$ npm install
</code></pre><p>To build minified versions:</p>
<pre><code>$ npm run build
</code></pre><p>Tests use minified version, so make sure to rebuild it every time you change
<code>nacl.js</code> or <code>nacl-fast.js</code>.</p>
<h3>Testing</h3><p>To run tests in Node.js:</p>
<pre><code>$ npm run test-node
</code></pre><p>By default all tests described here work on <code>nacl.min.js</code>. To test other
versions, set environment variable <code>NACL_SRC</code> to the file name you want to test.
For example, the following command will test fast minified version:</p>
<pre><code>$ NACL_SRC=nacl-fast.min.js npm run test-node
</code></pre><p>To run full suite of tests in Node.js, including comparing outputs of
JavaScript port to outputs of the original C version:</p>
<pre><code>$ npm run test-node-all
</code></pre><p>To prepare tests for browsers:</p>
<pre><code>$ npm run build-test-browser
</code></pre><p>and then open <code>test/browser/test.html</code> (or <code>test/browser/test-fast.html</code>) to
run them.</p>
<p>To run headless browser tests with <code>tape-run</code> (powered by Electron):</p>
<pre><code>$ npm run test-browser
</code></pre><p>(If you get <code>Error: spawn ENOENT</code>, install <em>xvfb</em>: <code>sudo apt-get install xvfb</code>.)</p>
<p>To run tests in both Node and Electron:</p>
<pre><code>$ npm test
</code></pre><h3>Benchmarking</h3><p>To run benchmarks in Node.js:</p>
<pre><code>$ npm run bench
$ NACL_SRC=nacl-fast.min.js npm run bench
</code></pre><p>To run benchmarks in a browser, open <code>test/benchmark/bench.html</code> (or
<code>test/benchmark/bench-fast.html</code>).</p>
<h2>Contributors</h2><p>JavaScript port:</p>
<ul>
<li><a href="http://github.com/dchest">Dmitry Chestnykh</a> (ported xsalsa20, poly1305, curve25519)</li>
<li><a href="https://github.com/devi">Devi Mandiri</a> (ported curve25519, ed25519, sha512)</li>
</ul>
<p>Original authors of <a href="http://nacl.cr.yp.to">NaCl</a>, <a href="http://tweetnacl.cr.yp.to">TweetNaCl</a>
and <a href="https://github.com/floodyberry/poly1305-donna">Poly1305-donna</a>
(who are <em>not</em> responsible for any errors in this implementation):</p>
<ul>
<li><a href="http://cr.yp.to/djb.html">Daniel J. Bernstein</a></li>
<li>Wesley Janssen</li>
<li><a href="http://hyperelliptic.org/tanja">Tanja Lange</a></li>
<li><a href="http://www.cryptojedi.org/users/peter/">Peter Schwabe</a></li>
<li><a href="https://github.com/mdempsky">Matthew Dempsky</a></li>
<li><a href="https://github.com/floodyberry">Andrew Moon</a></li>
</ul>
<p>Contributors have dedicated their work to the public domain.</p>
<p>This software is distributed without any warranty.</p>
<h2>Third-party libraries based on TweetNaCl.js</h2><ul>
<li><a href="https://github.com/alax/forward-secrecy">forward-secrecy</a> — Axolotl ratchet implementation</li>
<li><a href="https://github.com/dchest/nacl-stream-js">nacl-stream</a> - streaming encryption</li>
<li><a href="https://github.com/dchest/tweetnacl-auth-js">tweetnacl-auth-js</a> — implementation of <a href="http://nacl.cr.yp.to/auth.html"><code>crypto_auth</code></a></li>
</ul>
<h2>Who uses it</h2><p>Some notable users of TweetNaCl.js:</p>
<ul>
<li><a href="http://minilock.io/">miniLock</a></li>
<li><a href="https://www.stellar.org/">Stellar</a></li>
</ul>
        

        <footer class="android-footer mdl-mega-footer">
  <div class="mdl-mega-footer--top-section">
    <div class="mdl-mega-footer--left-section">
    </div>

    <div class="mdl-mega-footer--right-section">
      <a class="mdl-typography--font-light" href="#top">
        Ir para o topo <i class="material-icons">expand_less</i>
      </a>
    </div>
  </div>

  <div class="mdl-mega-footer--middle-section">
    <p class="mdl-typography--font-light">
      Copyright &copy; 2016 - Vitor Leal - <a href="mailto:me@vitorleal.com">me@vitorleal.com</a>
    </p>
  </div>

  <div class="mdl-mega-footer--bottom-section">
    
    <a class="android-link mdl-typography--font-light"
      href="https://vitorleal.com/">
      Home
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="https://vitorleal.com/blog">
      Blog
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="https://vitorleal.com/projetos">
      Projetos
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="https://vitorleal.com/portfolio">
      Portfolio
    </a>
    
    <a class="android-link mdl-typography--font-light"
      href="https://vitorleal.com/talks">
      Talks
    </a>
    
    
    <a class="android-link mdl-typography--font-light" href="https://github.com/vitorleal" target="_blank">
      GitHub
    </a>
    
    <a class="android-link mdl-typography--font-light" href="http://www.linkedin.com/in/vitorleal" target="_blank">
      LinkedIn
    </a>
    
    <a class="android-link mdl-typography--font-light" href="https://twitter.com/@vitorleal" target="_blank">
      Twitter
    </a>
    
  </div>
</footer>

      </div>
    </section>

    <script src="./assets/js/material.min.js" ></script>
    <script src="./assets/js/prism.js"></script>
  </body>
</html>
